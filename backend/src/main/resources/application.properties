# configure your datasource
quarkus.datasource.db-kind = postgresql
quarkus.datasource.username = ${DATABASE_USERNAME:danifalconr}
quarkus.datasource.password = ${DATABASE_PASSWORD:dev-online-cv-passwd}
quarkus.datasource.jdbc.url = ${DATABASE_URL:jdbc:postgresql://localhost:5432/online-cv-db}

# drop and create the database at startup (use `update` to only update the schema)
%dev.quarkus.hibernate-orm.database.generation = drop-and-create
quarkus.hibernate-orm.physical-naming-strategy = es.danifalconr.infrastructure.config.SnakeCasePhysicalNamingStrategy

quarkus.http.cors = true
quarkus.http.cors.origins = http://localhost:9000
quarkus.http.cors.headers = accept,authorization,content-type,x-requested-with
quarkus.http.cors.methods = GET,POST,PUT,DELETE,OPTIONS

# JWT configuration
mp.jwt.verify.publickey.location = publicKey.pem
mp.jwt.verify.issuer = https://online-cv.danifalconr.es
smallrye.jwt.sign.key.location = privateKey.pem

# Admin credentials (override via env vars in production)
app.admin.username = ${ADMIN_USERNAME:admin}
app.admin.password = ${ADMIN_PASSWORD:admin123}

# JWT token duration in seconds (1 hour)
app.jwt.duration = 3600

%test.quarkus.http.test-port = 8081
%test.quarkus.datasource.db-kind = h2
%test.quarkus.datasource.jdbc.url = jdbc:h2:mem:test;DB_CLOSE_DELAY=-1
%test.quarkus.datasource.username = sa
%test.quarkus.datasource.password = 
%test.quarkus.hibernate-orm.database.generation = drop-and-create

# OpenAPI / Swagger UI
quarkus.swagger-ui.always-include=true
quarkus.smallrye-openapi.info-title=Online CV API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=REST API for personal online CV

# Production profile overrides (Lambda runs with prod profile)
%prod.quarkus.hibernate-orm.database.generation = update
%prod.quarkus.http.cors.origins = ${CORS_ORIGIN:http://localhost:9000}
%prod.mp.jwt.verify.issuer = ${JWT_ISSUER:https://online-cv.danifalconr.es}